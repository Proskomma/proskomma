{
  "$comment": "version 0.1.0",
  "$id": "https://github.com/Proskomma/proskomma-json-tools/tree/main/src/schema/structure/document/document_structure_0_2_0.json",
  "type": "object",
  "properties": {
    "schema": {
      "type": "object",
      "properties": {
        "structure": {
          "type": "string",
          "enum": [
            "flat",
            "nested"
          ]
        },
        "structure_version": {
          "type": "string"
        },
        "constraints": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "enum": [
                  "perf"
                ]
              },
              "version": {
                "type": "string"
              }
            },
            "additionalProperties": false,
            "required": [
              "name",
              "version"
            ]
          }
        }
      },
      "required": [
        "structure",
        "structure_version",
        "constraints"
      ],
      "additionalProperties": false
    },
    "metadata": {
      "type": "object",
      "properties": {
        "translation": {
          "type": "object",
          "properties": {
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "properties": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "selectors": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          },
          "additionalProperties": {
            "type": "string"
          },
          "required": ["id"]
        },
        "document": {
          "type": "object",
          "properties": {
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "properties": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "chapters": {
              "type": "string",
              "pattern": "^[1-9][0-9]*(-[1-9][0-9]*)?$"
            }
          },
          "additionalProperties": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false
    },
    "sequences": {
      "type": "object",
      "propertyNames": {
        "pattern": "^\\S+$"
      },
      "additionalProperties": {
        "$ref": "../sequence/sequence_structure_0_2_0.json"
      }
    },
    "main_sequence": {
      "type": "object"
    },
    "main_sequence_id": {
      "type": "string"
    }
  },
  "required": [
    "schema",
    "metadata"
  ],
  "additionalProperties": false,
  "if": {
    "properties": {
      "schema": {
        "type": "object",
        "properties": {
          "structure": {
            "enum": [
              "flat"
            ]
          }
        }
      }
    }
  },
  "then": {
    "required": [
      "sequences",
      "main_sequence_id"
    ],
    "not": {
      "required": [
        "main_sequence"
      ]
    }
  },
  "else": {
    "required": [
      "sequence"
    ],
    "allOf": [
      {
        "not": {
          "required": [
            "sequences"
          ]
        }
      },
      {
        "not": {
          "required": [
            "main_sequence_id"
          ]
        }
      }
    ]
  }
}




